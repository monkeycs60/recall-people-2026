name = "recall-people-api"
main = "src/index.ts"
compatibility_date = "2025-01-01"
node_compat = true

# Rate limiting KV namespace
# Run: npx wrangler kv:namespace create "RATE_LIMIT"
# Then replace the id below with the returned ID
[[kv_namespaces]]
binding = "RATE_LIMIT"
id = "14ac4ad1ebd54bf8a597a9f7e1efbfa9"

# R2 bucket for avatar storage
# Run: npx wrangler r2 bucket create recall-people-avatars
[[r2_buckets]]
binding = "AVATARS_BUCKET"
bucket_name = "recall-people-avatars"

# Production URL (used when deployed)
# For local dev, override via .dev.vars or CLI
[vars]
BETTER_AUTH_URL = "https://recall-people-api.clement-serizay.workers.dev"

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true